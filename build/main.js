var M=document.createElement("img");M.src="./assets/bird.png";var S=6,L={x:80,y:40,speedX:4,speedY:0,image:M,alive:function(){L.speedY+=0.6,L.speedY=L.speedY*(100-S)/100,L.y+=L.speedY,z.drawImage(L.image,L.x,L.y)},contacts:function(h){if(h.image===M)return!1;const q=this.x+this.image.width,J=this.y+this.image.height,A=q>=h.x+K&&q<=h.x+h.image.width-K,D=J>=h.y+K&&J<=h.y+h.image.height-K;return A&&D},jump:function(){L.speedY-=20}},K=5;document.addEventListener("keydown",(h)=>{if(h.key=="ArrowUp")L.jump()});document.getElementById("main").addEventListener("click",(h)=>{L.jump()});function Z(){const h=new V,q=new W(h.x,h.y);return{myPipeFloor:h,myPipeCeil:q}}var x=200,Q={gap:150},U=document.createElement("img");U.src="../assets/pipeFloor.png";var N=document.createElement("img");N.src="../assets/pipeCeil.png";class V{constructor(){this.image=U,this.x=w.width,this.y=Math.random()*(w.height-200)+150}alive(){z.drawImage(this.image,this.x,this.y),this.x-=L.speedX}}class W{constructor(h,q){this.image=N,this.x=h,this.y=q-N.height-x}alive(){z.drawImage(this.image,this.x,this.y),this.x-=L.speedX}}function _(h,q,J){if(!E[h])E[h]=0;if(E[h]>q)return E[h]=0,J();else E[h]+=1}function R(h){if(h.x<=0-h.image.width-20)return!0;if(h.y<=0-h.image.height-20)return!0;if(h.x>=w.width+h.image.width+20)return!0;if(h.y>=w.height+h.image.height+20)return!0}var E={};var $=function(){z.clearRect(0,0,w.width,w.height),_("putPipes",Q.gap,function(){const{myPipeFloor:h,myPipeCeil:q}=Z();H.push(h,q)}),H.forEach((h,q)=>{if(L.contacts(h)||R(L))O();if(R(h))H.splice(q,1)}),H.forEach((h)=>h.alive()),u(),requestAnimationFrame($)},O=function(){H.splice(0),alert("Game Over!"),location.reload()},u=function(){T++,w.style.backgroundPosition=`${-T}px 0px`;const h=Math.floor(T/Q.gap);B.textContent=h},w=document.getElementById("main"),z=w.getContext("2d"),H=[L],B=document.querySelector("#score"),T=-1;window.requestAnimationFrame($);export{H as scene,z as ctx,w as canvas};
